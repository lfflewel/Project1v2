<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
 
  <title>Flashcards</title>
  <style>
      @import url('https://fonts.googleapis.com/css2?family=Nunito&display=swap');

*{
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
            background: linear-gradient(149deg, rgba(185,168,255,1) 0%, rgba(214,234,255,1) 48%, rgba(255,225,124,1) 100%);
            background-repeat:repeat;
            height: 100vh;
}

.navigation-container{
  width: 80%;
  display: flex;
  flex-direction: row;
  box-shadow: 0px 0px 45px #a8a8a8;
  border-radius: 30px;
  height: 5vh;
  margin: auto;
}

.navigation-buttons, .button {
  margin: auto;
  padding: 10px 20px;
  background-color: #71b9ff;
  color: #fff;
  border: none;
  font-size: 2vh;
  border-radius: 2vh;
  box-shadow: 15px 15px 20px #a8a8a8;
  transition: box-shadow 0.5s;
  outline: none;
  cursor: pointer;
}

.navigation-buttons:hover{
    background-color: #f1a566;
}

.button{
  outline: none;
  cursor: pointer;
  background-color: #71b9ff ;
}

#showCardButtons{
  display: none;
}

.button:hover{
  background-color: rgba(231, 17, 213, 0.137);
  color:#000;
}

.container{
  width: 1280px;
  margin: auto;
}

header{background-color: #fff;}

#header{
  display: flex;
  justify-content: space-between;
  align-items: center;
  min-height: 70px;
  padding: 0 20px;
  background: #fff;
}

#fcHeader{
  display: flex;
  justify-content: space-between;
  align-items: center;
  min-height: 70px;
  padding: 0 20px;
}

/* #header button{
  font-family: inherit;
  border: 1px solid red;
} */

#close_card_box, #submit{
  font-size: 1.5vh;
  border-radius: 1.5vh;
  margin-top: 20px;
  width: 100px;

}

#create_card{
  display: none;
  width: 500px;
  margin: auto;
  padding: 30px;
  margin-top: 20px;
  background: whitesmoke;
  box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.9);
}

#create_card h2{
  color: black;
  text-align: center;
}


#create_card textarea{
  width: 100%;
  border-radius: 5px;
  font-family: inherit;
  border: 1px solid lightgray;
}

input[type="text" i] {
  padding: 2px 4px;
  margin-top: 10px;
  width: 450px;
  height: 100px;

}

input[type="submit" i] {
  width: 100px;
  margin: 20px;
  float: left;
  border-radius: 1.5vh;
}

/* #create_card button{width: fit-content;} */

#flashcards{
  display: flex;
  /* flex-direction: row; */
  justify-content: center;
  align-items: center;
  flex-wrap: wrap;
  width: 100%;
  margin: auto;
  margin-top: 10px;
  padding: 0px 10px;
}

.flashcard{
  width: 370px;
  height: 200px;
  word-wrap: break-word;
  margin: 10px; 
  background:#fff;
  cursor: pointer;
  box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.9);
}

.flashcard h2{font-size: 1rem;}

@media(max-width:1280px){
  .container{width: 100%;}
}

@media(max-width:768px){
  .flashcard{margin: auto;}

  .flashcard{
    margin-top: 10px;
    margin-bottom: 10px;
  }
}

@media(max-width:480px){
  #header{
    padding: 20px;
    gap: 10px;
    flex-direction: column;
    align-items: center;
  }

  #create_card{width: 95%;}

  .flashcard{width: 100%;}

}

.questionSide {
  height: 20px;
  width: 370px;
  background:#fff;
  border-top: 1px solid red;
  margin-top: 30px;
  padding: 15px;
  text-align: center;
}

.answerSide {
  height: 20px;
  width: 370px;
  text-align: center;
  padding: 30px;
  background-color: white;
  color: red;
}

.hide {
  display: none;
}

  </style>
</head>
<body>
  <div class="navigation-container" style="margin-top: 10px; margin-bottom: 10px;">
    <button type="button" class="navigation-buttons" onclick="location.href = '/homepage'">Home</button>
    <button type="button" class="navigation-buttons" onclick="location.href = '/courses'">Courses</button>
    <button type="button" class="navigation-buttons" onclick="location.href = '/decks'">Decks</button>
    <button type="button" class="navigation-buttons" onclick="location.href = '/logout'">LOGOUT</button>
    </div>
  <main>
    
    <div id="fcHeader" class="container">
      <h1> Flashcards</h1>
          <div id="addDelButtons" >
            <button class="button" value= "add" id="show_card_box" onclick="showCardBox()">Add Card</button>
            <!-- <button class="button" value="delete" id="delete_cards">Del Cards</button> -->
            <!-- <button class="button" value="show" id="show_cards" onclick="showFlashCards()">Show Cards</button> -->
          </div>
    </div>
    
    <section>
      <div class="container">
        <div id="create_card">
          <h2>Create Flashcard</h2>
          <form action="/createCards" method="POST">
              <label for="question">Question</label>
              <input type="text" name="question" maxlength="280"></textarea>
              <br>
              <label for="answer" maxlength="280">Answer</label>
              
              <input type="text" name="answer" maxlength="280"></textarea>
              <br>
              <input type="submit" value="Save" onclick="addFlashCard()">
              
          </form>
          <button id="close_card_box" onclick="closeCardBox()">Close</button>
          
        </div>
      </div>
    </section>

  
      <!-- <div class="Container">
        <div id="header">
          <div id="showCardButtons" >
            <button class="button"  id="flip_card" onclick="flipCard()">Flip Card</button>
            <button class="button"  id="next_card" onclick="nextCard()">Next Card</button>
          </div>
        </div>
      </div> -->
    
    
      <div id="flashcards" style="height:87vh">
       
        <% for (var i = 0; i < cards.length; i++) { %>
          <form method="POST" action="/deletecards">
          <div class="flashcard">
            <div style="height: 20vh" class="questionSide" id="question-<%= i %>" onclick="toggleFlashCard('question', '<%= i %>')"><%= cards[i].Question %></div>
            <div  style="height: 20vh" class="answerSide hide" id="answer-<%= i %>" onclick="toggleFlashCard('answer', '<%= i %>')"><%= cards[i].Answer %></div>
            <input name = "cardID" type="hidden" value="<%= cards[i].cardID %>"></input>
          </div>
          <button type="button">Delete</button>
          </form> 
        <% } %>
        
        
          
        
      </div>

    <!-- EXPLAIN: -->
      <!-- We don't need a dictionary because  object is already defined with Question and Answer. I deleted the convert to dictionary in index.js  -->
      <!-- We just do a for loop, with the length of cards list size, then "i" would be the number which we will then use as index. -->
      <!-- And so, we can pass in the "i" to not only as the unique id names but also in our function parameter. Without index, it would only toggle the first card. -->
      <!-- So when the function looks for elements to toggle, it will target specifically and only whatever the id name that matches, so every card is unique. -->

  </main>
  <script>
    // add card box and hid add/del buttons
  function showCardBox() {
      document.getElementById("create_card").style.display = "block";
      document.getElementById("addDelButtons").style.display  = "none";
      // document.getElementById("showCardButtons").style.display  = "none";
      document.getElementById("flashcards").style.display = "none";
    
    };

    // hide new card box unhide add/del buttons
  function closeCardBox() {
    document.getElementById("create_card").style.display = "none";
    document.getElementById("addDelButtons").style.display = "block";
    document.getElementById("flashcards").style.display = "";
  };

  function addFlashCard() {
    document.getElementById("create_card").style.display = "none";
    document.getElementById("addDelButtons").style.display = "block";
    document.getElementById("flashcards").style.display = "none";
    // document.getElementById("showCardButtons").style.display = "none";
    
  };

  // function showFlashCards(){
  //     document.getElementById("flashcards").style.display = "block";
  //     document.getElementById("showCardButtons").style.display = "block";
  // };

  // togglefunction to flip the card
  // cardNumber = i = index
  
    function toggleFlashCard(side, cardNumber) {

      console.log(cardNumber);
      console.log(document.getElementById(`question-${cardNumber}`));
      

      if (side === "question")
      {
        document.getElementById(`question-${cardNumber}`).classList.add("hide");
        document.getElementById(`answer-${cardNumber}`).classList.remove("hide");
      }
      else if (side === "answer")
      {
        document.getElementById(`question-${cardNumber}`).classList.remove("hide");
        document.getElementById(`answer-${cardNumber}`).classList.add("hide");
      }
    };

  </script>
  <script src="index.js"></script>
</body>
</html>
